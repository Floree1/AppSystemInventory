{% extends "base.html" %}

{% block header %}
<h1 class="page-title">{{ _('Profile Settings') }}</h1>
{% endblock %}

{% block content %}
<div class="profile-container">
    <div class="profile-header">
        <div class="profile-avatar-large">
            {% if current_user.profile_image %}
            <img src="{{ url_for('static', filename=current_user.profile_image) }}" alt="Profile Picture">
            {% else %}
            <i class="bi bi-person-circle"></i>
            {% endif %}
        </div>
        <div class="profile-info-summary">
            <h2>{{ current_user.username }}</h2>
            <span class="role-badge">{{ current_user.role|upper }}</span>
        </div>
    </div>

    <form method="POST" enctype="multipart/form-data" class="profile-form">
        <div class="settings-section">
            <h3 class="section-title"><i class="bi bi-person-lines-fill"></i> {{ _('Personal Information') }}</h3>
            <div class="form-group">
                <label for="profile_image">{{ _('Profile Picture') }}</label>
                <input type="file" id="profile_image" name="profile_image" class="form-control" accept="image/*">
            </div>
            <div class="form-group">
                <label for="username">{{ _('Username') }}</label>
                <input type="text" id="username" name="username" class="form-control"
                    value="{{ current_user.username }}" required>
            </div>
        </div>

        <div class="settings-section">
            <h3 class="section-title"><i class="bi bi-palette-fill"></i> {{ _('Appearance') }}</h3>
            <div class="form-group">
                <label for="theme">{{ _('Theme Preference') }}</label>
                <select name="theme" id="theme" class="form-control">
                    <option value="default" {% if current_user.theme_preference=='default' %}selected{% endif %}>{{
                        _('Default (Light)') }}</option>
                    <option value="dark" {% if current_user.theme_preference=='dark' %}selected{% endif %}>{{ _('Dark
                        Mode') }}</option>
                    <option value="blue" {% if current_user.theme_preference=='blue' %}selected{% endif %}>{{ _('Ocean
                        Blue') }}</option>
                    <option value="purple" {% if current_user.theme_preference=='purple' %}selected{% endif %}>{{
                        _('Royal Purple') }}</option>
                </select>
            </div>
        </div>

        <div class="settings-section">
            <h3 class="section-title"><i class="bi bi-shield-lock-fill"></i> {{ _('Security') }}</h3>
            <p class="text-muted small">{{ _('Leave blank if you do not want to change your password.') }}</p>
            <div class="form-group">
                <label for="current_password">{{ _('Current Password') }}</label>
                <input type="password" id="current_password" name="current_password" class="form-control">
            </div>
            <div class="form-group">
                <label for="new_password">{{ _('New Password') }}</label>
                <input type="password" id="new_password" name="new_password" class="form-control">
            </div>
            <div class="form-group">
                <label for="confirm_password">{{ _('Confirm New Password') }}</label>
                <input type="password" id="confirm_password" name="confirm_password" class="form-control">
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">{{ _('Save Changes') }}</button>
        </div>
    </form>
</div>
{% endblock %}